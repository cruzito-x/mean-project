<div class="container p-2 mt-3">
  <div class="row">
    <div class="col-12">
      <h3> {{ (products[0].sub_category+' '+products[0].category+' '+products[0].brand[0].name +' '+ products[0].name).toUpperCase() }} </h3>
      <hr>
      <div class="row">
        <div class="col-md-6 col-sm-12 d-flex align-items-center justify-content-center">
          <img src="http://localhost:3000/{{ products[0].photo }}" alt="" class="img-fluid rounded h-100">
        </div>
        <div class="col-md-6 col-sm-12">
          <div class="row">
            <div class="col-12">
              <span>Rating:</span> <span class="text-warning fs-5"> {{ generateRatingStars(products[0].rating) }}
              </span>
            </div>
            <div class="row">
              <div class="col-6">
                <span class="text-primary fs-1">${{ products[0].price }}</span>
              </div>
            </div>
            <div class="col-2">
              <input class="form-control" type="number" id="quantity" min="1" value="1">
            </div>
            <div class="col-10">
              <button class="btn btn-outline-primary w-100" (click)="addToCart(products[0])"> Add to cart <fa-icon [icon]="faCartShopping" />
              </button>
            </div>
          </div>
          <div class="row mt-4">
            <div class="accordion" id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-target="#collapseOne" aria-expanded="true"
                    aria-controls="collapseOne">
                    <fa-icon class="me-1 text-primary" [icon]="faInfoCircle" /> Information
                  </button>
                </h2>
                <div id="collapseOne" class="show">
                  <div class="accordion-body">
                    <span>
                      Availability:
                      @if(products[0].stock >= 150) {
                        <span class="badge rounded-pill text-bg-primary">In stock</span>
                      } @else if (products[0].stock < 150) {
                        <span class="badge rounded-pill text-bg-low">Low stock</span>
                      } @else {
                        <span class="badge rounded-pill text-bg-danger">Out of stock</span>
                      }
                    </span>
                    <br>
                     <span> Colors:
                      @for(item of products[0].colors; track $index) {
                        <span class="ms-2 badge rounded-circle bg-{{item.color}}" (click)="indexSelectedColor($index)" style="cursor: pointer;"> <span style="visibility: hidden;"> x </span> </span>
                      }
                     </span>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    <fa-icon class="me-1 text-primary" [icon]="faTags" /> Tags
                  </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                      @for(item of products[0].tags; track $index) {
                        <span class="badge rounded-pill text-bg-primary me-2"> {{ item.name }} </span>
                      }
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-12">
      <ul class="nav nav-underline">
        <li class="nav-item">
          <a class="nav-link text-primary" [class.active]="activeTab === 'description'"
            (click)="activeTab = 'description'">
            Description
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-primary" [class.active]="activeTab === 'tech_specs'"
            (click)="activeTab = 'tech_specs'">
            Technical specifications
          </a>
        </li>
      </ul>

      <div class="tab-content">
        @if(activeTab === 'description') {
        <div class="tab-pane fade show active">
          <p class="mt-3">
            {{ products[0].description }}
          </p>
        </div>
        } @else {
          <div class="tab-pane mt-3 fade show active">
            <p>
              @for(item of products[0].technical_specifications.split(', '); track $index) {
                {{ item }} <br>
              }
            </p>
          </div>
        }
      </div>
    </div>
  </div>

</div>